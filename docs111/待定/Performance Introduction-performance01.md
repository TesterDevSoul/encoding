---
title: Performance Introduction
date: 2022-09-04 09:52:09.609
updated: 2022-09-14 16:48:04.041
url: /archives/performance01
categories: 
- jmeter
tags: 
- jmeter
---

# 性能简介
## 本章要点
- [ ] 正确理解性能
- [ ] 正确理解性能测试



## 性能介绍
**什么是性能？？**

在讲性能测试之前，先带着大家来了解一下什么是性能，那为什么先来给大家说一下这个性能概念呢？

因为只有我们知道了什么是性能之后，才能了解为什么要做这个性能测试。
现在目前就有一个现状，就哪怕是已经工作了几年的性能测试工程师，在面试的时候他也可能不知道什么是性能，但是能快速的说出来什么是性能测试。
>面试官 问性能测试相关的概念的时候，他可能很快速的回答上来，但是问到性能是什么的时候，就无法很好的组织语言去回答这个问题。


**性能** 是指 **事物**「系统、软件产品」 所具有的 **性质** 和 **能效**。

## 性能本质

软件质量模型将系统、软件产品属性划分为8个特性：*功能性*、*性能效率*、*兼容性*、*易用性*、*可靠性*、*信息安全性*、*维护性* 和 *可移植性*。


在 **性能效率** 特性中提到，该特性对应的有 **时间**特性、**资源利用性**。


>后面会给大家讲解到对应的性能的指标描述，用哪些指标确定性能的好坏。
>描述性能相关的指标有很多，但是我们也不要怕自己记不住，因为无论哪种描述，最终的性能本质就只有2点。

### 系统的处理效率 How Fast
- 当前系统处理的请求能有多快，即对应请求的处理效率。
>一个请求的响应时间是多少毫秒。
>例如：一个请求的响应时间为500ms，这就是当前系统的处理效率。
- 时间越快，效率越高；时间越慢，效率越低。

### 系统的处理能力 How Much
- 当前系统能最大处理多少个请求的并发，即系统的处理能力。
>单位时间内，系统可以处理多少请求。
>例如：系统在一分钟内可以处理100个请求的并发，这就是当前系统的处理能力。

理论上，效率越高，单位时间内处理的请求数会越多。那实际上，一个系统，无论是从 **硬件** 还是 **软件** 上而言，对应的资源是有限的，所以会导致出现一种情况：

提升效率的时候，到了一个临界线「系统没有足够的资源提供」，这时就会 *牺牲*/*降低* 系统的处理能力；同样，提升系统的处理能力的时候，就要牺牲一部分系统的处理效率。

### 关系
**系统的处理效率** 和 **系统的处理能力**，这两者是一个 此消彼长的关系。
在特定资源条件下「有限」，不存在两者同时无限增长的情况，但是在刚开始的阶段，两者可能同时增长，但是到了某个临界点，两者的状态则为此消彼长。

>比如：有一个购物系统，正常的情况下，1个请求的响应时间为100ms，那1s「1000ms」能处理10个请求，当前系统的硬件条件下，该系统最多处理1000个请求。

>现有一个需求，在当前系统资源不变「即硬件不增不减」，想要让系统能处理5000个请求，则对应服务会挂掉。但是，前面的1000个请求会被正常处理，响应时间都是100ms，超过的请求，对应响应会变慢，系统会有请求的线程堆积，甚至服务最后挂掉。


### 注意
- 对系统进行性能的评估和考核要 **同时** 从 `请求的处理效率` 和 `系统的处理能力` 两个方面

>评估一个系统的性能，一定要同时结合这 2个方面去进行考虑和评估。

如果想要对系统进行前后的对比，则可以通过以下两种情况：

一种情况，保持效率相当的前提下，去提高系统的处理能力；

另一种情况，在保持系统的处理能力的前提下，去比较效率。

>不然，一个系统的前后对比性，是不存在的。

- 对于系统而言，**性能**的本身`没有绝对的标准`，一切以符合企业需求为准

>在性能测试中，一个系统的性能好坏没有一个123这样定义好的绝对的标准，最终的性能指标是否符合当前企业的标准都是按企业需求为准。
>**性能**的本身来说，不是越快就一定越好，不是处理的请求越多就一定越好，如果说不限制项目经费，那另当别论。
>有可能系统只是要求响应速度比较快，但是处理速度没有那么高。比如说，公司内部的CRM系统或者是OA系统，对应的用户并发不会太高，所以，为了优化系统，我们更多的会关注系统的处理效率而不是处理能力。

## 性能测试
### 性能测试与功能测试的区别

- **功能测试**：测试的是该系统的功能可以使用。

	- 解决的是：产品从0-1的问题。

	>解决的问题：产品可以联网、登录、注册等等

- **性能测试**：是一种软件测试，在**特定的环境**{硬件}下，通过模拟不同的 **负载用户** 来测试系统的各项 **性能指标** 是否达到特定标准。
	
    >测试的是多个人使用该产品的情况下，是否和1个人使用的感受一样  

	- 解决的是：产品从1-n的问题。
	
	>解决的问题：产品在多个人使用的情况下，对应的 响应时间、页面加载、功能上是否正常「性能指标 」。
### 解析
- 性能测试，属于软件测试的领域。
	>大家如果后面找性能测试的工作，就需要在测试行业的岗位内找。

- 性能测试测试的是 处于特定环境和配置下的系统。
	>有两台服务器，一个是单核CPU、一个是4核CPU。同时部署同一个业务，比如登录业务。
	>对应该业务的性能能一样吗？肯定是不同的。
	>两台服务器，一个是千兆带宽、一个是百兆带宽，对应的处理效率也肯定是不一样的。
	
    >就相当于拿一个碗来盛饭和拿一个盆来盛饭，对应盛的饭量是不一样的，盆比较大、所以盛的饭会比较多。

  - 结论：**性能测试计划 注明 软、硬件的环境配置**。
      >如果抛开环境和配置，去单独讲一个系统的性能好不好，是不可能的。

      >性能测试设计 的前提是要有系统环境、硬件配置、软件版本的说明。如果不提供这些东西，是无法对系统的性能结论对标。 

- 性能测试，在一定量的负载用户下。
  >不是一个、两个用户来测试，要有压力，一定量的负载。现场有大量用户线上真实数据去跑，或者用工具模拟大量用户去请求，如果说用手工的方法去做性能测试，不科学。  
	
- 系统的 正确性「好」、响应时间「快」{`识别应用程序的响应是否快速`-`效率`}、吞吐量「多」、成功率「好」、稳定性「好」{`检查应用程序在不同负载下是否稳定`}  等特性 是否满足 相关方 需求。    
	
    - 正确性「好」：发送一个请求，要设置对应的期望值。和功能测试一样。
	
	>不只是code码是200，对应的响应字段也要校验，包含字段success等等。
	
    - 相关方：项目管理有关系人、相关方的概念。我们做项目为了相关方服务。
	
    >上课时，学生就是老师的相关方。学生的反馈上课节奏的好坏，决定了上课的氛围。性能测试为相关方服务，即干系人。性能测试用例设计的一定要找对相关方，如果都不知道对应客户、使用者是谁，那性能测试意义何在？做任何事情都要确立好一个目标。
		- 只有相关方确定好，才能做需求分析，明确对方需求是什么。最后为性能测试中的业务场景。
### 系统目标
- **性能测试**追求的目标：让系统 多快好省。
	- **多**：尽可能处理多业务，多用户量；系统能够容纳多用户。
	- **快**：以多快的速度去处理访问。
	- **好**：正确率高，不只是处理请求的速度快，还要对应的正确率高。
	- **省**： 节省系统资源。CPU、网络带宽、内存等等占比比较低。
	
    
### 概念
性能测试，首先就是找相关方 即 **压测的需求方**。
然后，让产品/软件 在不同的配置环境下，使用不同的负载压力，然后看系统在 **多快好省** 这几个方面的表现。
拿到相关性能指标后，进行分析，发现性能相关问题，然后进行调优。
再完善、提升系统的性能，进而提升整个产品的质量。
    
    
    
### 性能测试目标

**为什么需要性能测试？**

性能测试提供有关其应用程序的速度、稳定性和可扩展性的信息。更重要的是，它 **揭示了产品上市前需要改进的地方** 。否则，软件可能会遇到以下问题：
- 多个用户同时使用时运行缓慢、不同操作系统之间的不一致以及可用性差。

性能测试 除了获取性能指标外，更多为了 **发现性能瓶颈** 和 **性能问题**，然后针对性能问题和性能瓶颈进行 **分析** 和 **调优** 。




## 面试题：谈一谈性能测试
性能测试，一方面是为了获取系统相关的性能指标，同时发现产品的性能瓶颈和性能问题，然后进行分析和调优。
具体的展开来讲，性能测试则是在**特定的环境**{硬件}下，通过模拟不同的 **负载用户** 来测试并监控系统的各项 **性能指标** ，比如 正确性「好」、响应时间「快」、吞吐量「多」、成功率「好」、稳定性「好」  等是否满足 相关方 需求。




## 性能测试的必要性


随着互联网的发展，单机软件的逐渐减少，系统从单机步入“云”时代，软件系统功能和规模也越来越庞大，用户规模也越来越大，用户对产品的要求也越来越高，以前可能看重功能方面，现在正在逐步转变为性能方面。随着用户数量的增多，系统稳定性就成为企业的首要技术保障，稳定才能带来流量，才能赚钱。

因为从这几年发生的事件来看，性能带来的严重问题以及损失不容忽视，而性能测试的重要性也不言而喻。
##### 案例 1

成都核酸系统崩溃事件陷“罗生门”
　　简单地说，对于核酸系统“崩溃”，东软集团的意思是“上述现象与核酸检测系统软件无关，是网络故障”。

![image-1662457066523](/upload/2022/09/image-1662457066523.png)
##### 案例 2

2008 年的奥运会票务系统，由于庞大的订票人数超出预期，奥运票务系统开工后不久便陷入瘫痪状态，当时对外公布的是奥运票务系统每小时能处理 15 万张门票的销售，以及承担每小时 100 万次以上的网上浏览量，但 10 月 30 日系统死机前每小时的网上浏览量达到 800 万，1 小时售出的票也达到了 20 万张。由于预估工作的缺陷，导致很多人无法通过网络订到自己想要的票。

##### 案例 3

魔兽世界在中国的代理商由九城变更为网易，与九城服务器经常死机不无关系，但是换作网易后，服务器也经常死机。2010 年 10 月 11 日，魔兽世界服务器故障时，官网论坛上的游戏玩家纷纷发贺词表示不满，从这可以看出公司对魔兽世界的性能预估存在不足。也正是因为对性能严重忽视间接导致了九城在失去魔兽世界之后，从一家土豪公司成了一家几乎被人遗忘的公司。

##### 案例 4

2010 年，中国最大的微博平台新浪微博死机 4 小时，新浪官方解释说：之所以掉线几小时，是因为用户增长超出预期，服务器备感压力。自上午 10 点起，用户无法登录，新浪的报错页面几次更改，最初的微博正在升级，将于 11:30 恢复，然后改为12:00 恢复，过了一段时间，干脆改为稍后恢复，然而，估计是看不到恢复希望，提示信息又改为微博系统压力过大正在抢修，我们深表歉意。悲剧的是歉意竟然写成了谦意。

- 12306 订票

## 总结
- 性能 考虑的本质内容：**请求的处理效率**、**系统的处理能力**
- 性能测试：特定的环境下，通过 **负载用户** 来测试系统的各项 **性能指标** 是否达到特定标准。
- **性能测试**追求的目标：让系统 **多快好省**。
