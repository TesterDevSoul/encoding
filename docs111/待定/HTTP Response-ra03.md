---
title: HTTP Response
date: 2022-08-15 19:47:07.001
updated: 2022-08-16 10:41:44.653
url: /archives/ra03
categories: 
- rest-assured
tags: 
- rest-assured
---

# HTTP 响应
由于客户端向服务器发送 `HTTP` 请求而收到的每个 `HTTP` 响应都有一个状态码。这个状态码值告诉我们 `HTTP` 响应是否成功。本文是我们上一篇文章的续篇，其中我们执行了一个示例 `REST API` 测试调用。在本文中，我们将讨论如何使用 `REST Assured` 验证 `HTTP` 响应状态。

## 本章要点

- [ ] 使用 Rest Assured 验证 HTTP 响应状态
- [ ] 如何验证 HTTP 响应状态码
- [ ] 验证 HTTP 错误状态代码
- [ ] 如何验证 HTTP 响应状态行


## 验证 HTTP 响应状态
使用 `Rest Assured` 验证 `HTTP` 响应状态
`HTTP` 响应对象通常表示 `Web` 服务服务器为响应客户端请求而发回的 `HTTP` 数据包（响应数据包）。`HTTP` 响应包含：

- 状态码
- 标题的集合
- body体

当我们说需要验证 `HTTP` 响应状态时，我们希望有一种机制来读取和验证整个响应对象，包括 *状态*、*标头* 和 *正文* 。因此，我们将分别验证每个 `HTTP` 响应组件。

`HTTP`响应状态的验证将分三个部分来处理：

- 1.验证 HTTP 响应状态代码
- 2.如何验证错误状态代码
- 3.验证响应状态行


相同的 `REST API` 返回 `XML` 或 `JSON` 格式的响应消息。此格式取决于 `HTTP` 请求中的 `Media-Type` 属性。

那么，客户端如何知道它将从 `API` 获得什么类型的响应呢？
>这是由响应标头管理的。`Response Header` 包含一个 `Content-Type` 属性，用于说明响应正文格式的类型


![HTTP响应](https://cdn.jsdelivr.net/gh/testeru-top/top-images/restassured/202208152036107.png)
![](https://cdn.jsdelivr.net/gh/testeru-top/top-images/restassured/202208152037891.png)


从上面的屏幕截图中可以看出，**响应**具有 *状态* 、*标题* 和 *正文* 。
如果我们检查“响应标头”部分，在上面的屏幕中，它有一个`content-type`属性，该属性具有值以及其他属性。在验证此标头时，客户端知道我们可以期待什么类型的响应（body）。

### 验证响应的状态

##### `HTTP` 成功响应状态码
如何验证 `HTTP` 响应状态码？

当 *客户端* 向 *服务器*  **请求** 一条特定信息时，*服务器* 将带有 **状态代码的响应** 发送*回客户端* 。
服务器返回的状态码告诉我们请求是否成功。如果请求成功，服务器会发送 200-299 范围内的状态码。如果请求不成功，则返回范围以外的状态码。可以在W3 页面上获取 HTTP 状态代码列表及其描述。



##### `HTTP` 错误状态码
如何验证 `HTTP` 错误状态码？

一般，请求-响应 正常，就只收到了 200 个表示请求成功的状态码。但请求并不总是正确的，有可能是 *服务器已关闭* 或 *`REST API` 无法正常运行* ，或者 *请求本身存在问题* 。综上所述，可能会有以下几种情况：

- `REST API` 的服务器关闭、停止运行
- 客户端发送的请求不正确
- 客户端请求的资源不存在
- 在处理请求的过程中，服务器端发生错误

因此，当上述任何一种情况发生时，`REST API` 将返回一个适当的状态码，而不是 `200`。


##### 响应状态行
如何验证响应状态行？
“状态行”是 `HTTP` 响应中返回的第一行。状态行由**三个子字符串**组成：

- `HTTP` 协议版本
- 状态码
- 状态码的字符串值

当请求成功时，状态行的值将是 `HTTP/1.1 200 OK`。
- 第一部分是 `HTTP` 协议（`HTTP/1.1`）。
-  第二个`HTTP` 状态代码(200)。
-  第三个是状态消息 （`OK`）。

## 总结

- 从服务器获得的响应由状态、标头和正文组成
- 响应的状态依次包含 **状态代码** 和 **状态字符串**