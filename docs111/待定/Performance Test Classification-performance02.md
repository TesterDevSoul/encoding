---
title: Performance Test Classification
date: 2022-09-05 09:38:15.76
updated: 2022-09-14 17:55:59.378
url: /archives/performance02
categories: 
- jmeter
tags: 
- jmeter
---

# 性能测试分类
现在让我们深入研究性能测试教程，首先看看它的不同类型。

## 本章要点
- [ ]  了解性能测试分类
- [ ]  了解基准测试
- [ ]  了解负载测试
- [ ]  了解压力测试
- [ ]  了解稳定性测试
- [ ]  了解扩展性测试

## 性能测试分类

按照测试目的可以分为以下几类：



### 1」基准测试
#### 概念
一般来说，基准测试就是用来确定系统的响应时间的基准值。
#### 方法
通常就是采用一个虚拟用户，多次（10次左右）执行业务，取响应时间的平均值即可。

#### 目的
- 确定系统的响应时间的基准值，为容量场景提供可对比的基准数据

- 为了找到系统中明显的配置及软件 Bug

- 采集各项性能指标作为后期版本性能的对比



### 2」负载测试
Load Testing
#### 概念
是指模拟不同数量级别的负载用户去对系统进行测试，从而获取系统的最大处理能力、最佳性能表现、最大有效的负载用户数。通过该项测试可以获取到系统在不同负载下的性能变化曲线，从而找到性能的拐点 的一种测试。
#### 方法
通过施加一些 **小于或等于** 系统所需的负载来检查应用程序的性能；
- 模拟不同数量级别的负载用户去对系统进行测试。
>并发数为50，100，130，150这样逐步加压
#### 目的
- 检查应用程序在 **不同** 的 **负载用户数** 下的执行能力

- 在软件应用程序上线之前识别性能瓶颈「性能的拐点」
>获取系统在不同负载下的 *性能参数*，寻求系统在不同负载下的性能变化曲线，从而寻求到性能的拐点。








##### 性能参数
-  **响应时间**「**最佳性能表现**」
-  **服务器负载**（即吞吐量）「**最大有效的负载用户数** 」
-   负载测试执行期间观察到的 **错误率**「 **最大处理能力**」 

>无论系统的压测需求是什么， 首先 压测第一阶段我们在得到基准测试的响应时间后，就需要对系统进行的就是 **负载测试**。负载测试完成后再去考虑，业务和产品的一些压测需求。

##### 1.负载测试起始并发数
并发数以客户最低的需求来判断，不可能是1，可以选择50，100	。
##### 2.编写脚本
脚本编写的接口请求先后顺序不同，也会对压测结果造成影响。
>负重训练，抱起一个100斤的人和抱起100斤的书，对应的难度是不一样的。所以，在同一个系统环境下，进行100个请求的并发，当脚本编写的不同，对应的压测结果不同。
##### 3.多轮次测试
负载测试会涉及到多个轮次的测试，如果说压测脚本从50、100、120、130这样的脚本开始一气呵成，最后，系统最大并发结果为130。那最终服务器的压力是比130要大还是要小。

为了让各个并发更有对比性，建议大家：
>在时间允许的前提下，每次测试，重启服务，甚至是重启服务器「把Linux系统重启，然后再启动服务」。
网络环境的影响在性能测试中的影响是最大的一点，但是该点还是无法调优、最不需要调优的一点。

- 在独立的局域网环境下进行性能测试
>不是公司里面的局域网就是独立的局域网，公司内部的网络，有路由器损耗，多个人员连接路由器，有可能不同时间，对应占用的带宽不同。所以，同一个脚本，多次测试，会有不同的结果。有可能在第一次运行脚本的时候有的同事在上传下载代码，在第二次运行脚本的时候其他同事在浏览网页，这样对应压测脚本的带宽就是不同的

【例如：1000 个用户是客户给定的期望负载，3/秒是我们在执行负载测试时想要达到的目标。】
##### 注意⚠️
负载测试需要考虑峰值，即 最高点的值。


### 3」压力测试
Stress Testing 
            系统在高负载下的性能表现，该项性能主要为了寻求系统能够承受的最大负载以及此时系统的吞吐率，通过该测试也可以发现系统在超高负载下是否会出现崩溃而无法访问，以及在系统负载减小后 ，系统性能能否自动回复
            
            
            
            压力测试可以理解为没有预期的性能指标，不断地加压，看系统什么时候崩溃，以此来确定系统的瓶颈或者不能接受的性能拐点，以获得系统的最佳并发数、最大并发数。压力测试就好比跑马拉松，看你到底能跑多久，什么时候就坚持不住了。



#### 概念
- 在极端工作负载下「高负载」测试应用程序「测试服务端」的表现。

> 系统在高负载下的性能表现，该项性能主要为了寻求系统能够承受的最大负载以及此时系统的吞吐率，通过该测试也可以发现系统在超高负载下是否会出现 **崩溃而无法访问** 「极限测试」，以及在系统负载减小后 ，系统性能能否自动恢复「高负载下的系统恢复性测试」

可以理解为没有预期的性能指标，不断地加压，看系统什么时候崩溃，以此来确定系统的瓶颈或者不能接受的性能拐点，以获得系统的最佳并发数、最大并发数。
>压力测试就好比跑马拉松，看你到底能跑多久，什么时候就坚持不住了。


#### 目的
确定应用程序的断点，观察系统在出现故障时的反应。

- 通过该测试也可以发现系统在超高负载下是否会出现崩溃而无法访问，以及在系统负载减小后 ，系统性能能否自动回复

- 目的是找出因资源不足或资源争用而导致的错误。

- 压力测试还可用于确定测试对象是否能够处理的最大工作量。



测量应用程序的收支平衡点
>压力测试并不是简单地为了一种破坏的快感而去破坏系统，实际上它可以让测试工程师观察系统在出现故障时的反应。系统是不是保存了它出现故障时的状态？是不是它突然间崩溃掉了？它是否只是挂在那儿什么也不做了？在重启之后，它是否有能力恢复到前一个正常运行的状态？

#### 基准测试与压力测试区别
基准测试可以理解为针对系统的一种压力测试。但基准测试不关心业务逻辑，更加简单、直接、易于测试，数据可以由工具生成，不要求真实；而压力测试一般考虑业务逻辑(如购物车业务)，要求真实的数据。



##### 案例
>1000 个用户，3/秒运行完；平均1s运行334个用户。
>将期望的负载从 1000 增加到 1100 个用户，目标是 4/秒。
>在这种情况下执行压力测试时，它将通过，因为负载大于（100 以上）实际所需负载。
>将期望的负载从 1000 增加到 2000 个用户，目标是 4/秒。
>在这种情况下执行压力测试时，测试失败。

        

### 4」稳定性测试

Endurance Testing 

-  稳定性测试 ：耐久性测试 也称为“浸泡测试”。重点在于稳定二字
#### 概念
- 在特定时间段内 对系统持续 施加负载  来检查应用程序的性能 
>以正常负载或者高于正常负载来对系统进行长时间的测试，检测系统是否可以长久稳定运行，以及系统的各项性能指标会不会随着时间发生明显变化

- 要想知道系统稳定的情况，就需要长时间运行，在这段时间内观察系统的出错几率、性能变化趋势等。进而大大减少系统上线后的崩溃等现象。
- 一般都会进行所谓的 7×24 小时的稳定性测试。


#### 方法

场景的设计以模拟真实用户的实际操作为佳

#### 目的
- 确保软件可以在很长一段时间内处理预期的负载，测试系统的稳定性。

- 有助于发现应用程序中的内存泄漏问题。


>比如，系统最大并发结果为130，那在压力测试中，应该用110或120去进行稳定性测试，而不是使用130。并发数为50，80也是没有意义，因为服务端会很轻松一直进行50、80并发的请求处理。


![](https://cdn.jsdelivr.net/gh/testeru-top/top-images/jmeter/202209051359388.png)

#### 注意⚠️
- 一般稳定性测试需要在系统成型后进行，并且没有严重的 Bug 存在。

- 一般来说，稳定性测试 要求：`7×24`小时。

>如果上线时间急，没有这么久的时间进行稳定性测试，则至少持续24小时或12小时。 晚上下班后持续压12小时，或者周末持续压2天。

###  5」[扩展性测试](https://help.aliyun.com/document_detail/29338.html?utm_content=g_1000230851&spm=5176.20966629.toubu.3.f2991ddcpxxvD1#title-xy9-367-cw5)
扩容，加机器
#### 概念
- 测试系统在不同的容量级别下的性能表现，或者进而去评估系统在特定的容量级别下的性能表现
#### 方法
通常用于新上线的系统或者新搭建的系统环境，通过先测试单台服务器的处理能力。然后慢慢增加服务器的数量，测试集群环境下单台服务器的处理能力是否有损耗，集群环境的性能处理能力是否可以呈现稳定增加。

#### 目的

确定软件应用程序在“扩展”以支持用户负载增加方面的有效性。它有助于规划软件系统的容量增加。
>是用来确定系统的最低配置和推荐配置

- 最低配置：能够让系统基本运行起来的最低的配置要求。
- 推荐配置：所谓推荐配置不是最优配置，而是指在推荐配置下，系统的各项性能指标能够达到客户的需求（允许有一定的上下偏差）。



理想的扩展能力是资源增加几倍，性能就提升几倍。
- 扩展能力至少在70%以上。



### 6」失效恢复测试

前提：负载均衡的系统

#### 概念
- 失效恢复测试重在关注系统出现问题后能否根据预先制定的策略恢复，且恢复后能否正常运行

怎么理解呢？很简单，以跑马拉松为例，为了预防出现跑不动的情况，预先准备了一瓶红牛（应该给我广告费），当选手累得躺下后，拿出这瓶红牛一口气喝了，然后你有力量了，恢复了原来的状态，站起来继续跑。

#### 方法
在实际应用过程中，可以模拟一台或几台负载均衡机器出现故障来进行失效恢复测试，但需要注意的是，不仅要关心失效后，用户是否可以正常访问或者恢复后系统是否可以正常工作，也要关注失效后，系统还能支持多少并发用户，以及采用哪些备选方案来快速响应。

#### 目的
失效恢复测试一般是对具有负载均衡的系统进行的
- 主要是为了测试当系统局部发生故障时，是否会对全局产生大的影响，产生的影响是否在可以接受的范围内，以及用户能否继续使用系统


## 性能测试工程师的知识栈：
- 计算机的软硬件知识。
- 计算机操作系统、网络通信知识。
- 至少一种性能测试工具。
- 服务器相关的知识，至少熟练掌握一种服务器的配置、监控等。
- 至少一种编程语言。
- 至少一种数据库及相关知识。
- 两种以上的抓包工具（应用层fiddler/Chrome F12、网络层/wireshark）
- 各种监控相关的工具、配置。
- 其它相关的知识。


## 总结
- 性能测试分类：基准测试、负载测试、压力测试、稳定性测试、扩展性测试
- 基准测试：获取业务平均响应时间
- 负载测试：获取最大用户负载数
- 压力测试：持续一段时间内，最大负载数，系统性能；确定系统性能的断点
- 稳定性测试：在一定用户负载「不是最大用户负载数」下，系统是否可长时间稳定运行
- 扩展性测试：系统资源扩容，对应性能是否提升，提升至少在70%以上



**性能测试针对系统的性能指标，建立性能测试模型，制定性能测试方案，制定监控策略，在场景条件之下执行性能场景，分析判断性能瓶颈并调优，最终得出性能结果来评估系统的性能指标是否满足既定值。**


