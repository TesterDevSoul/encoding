## Allure2报告中添加用例分类


### 应用场景

在一个大型测试项目中，测试用例通常会分为多个模块或者功能组，而且这些测试用例通常会由不同的团队或者开发人员进行维护和执行。在这种情况下，为了方便管理和快速定位问题，就需要对测试用例进行分类。例如，可以将测试用例按照模块、功能、优先级等分类，从而方便测试管理人员根据自己的需要快速筛选出相应的测试用例。

另外，有些公司在管理测试用例时会按照特定的标准进行分类，例如遵循ISTQB测试标准的测试用例管理方法。在这种情况下，添加测试用例分类信息可以更好地遵循公司的测试流程和管理要求。

#### 1. 不同的功能模块或业务流程

针对不同的功能模块或业务流程，对用例进行分类，以便于测试人员和其他团队成员更好地理解和使用测试报告。

#### 2. 同一模块或流程的不同测试类型

针对同一模块或流程的不同测试类型（例如，冒烟测试、功能测试、性能测试等），对用例进行分类，以便于更好地掌握测试的进度和结果。

#### 3. 同一测试类型的不同用例执行阶段

针对同一测试类型的不同用例执行阶段（例如，前置条件、测试步骤、验证点等），对用例进行分类，以便于更好地分析测试结果和问题。

#### 4. 同一测试类型的不同测试目标

针对同一测试类型的不同测试目标（例如，正常流程、异常流程、边界测试等），对用例进行分类，以便于更好地评估测试覆盖率和质量。

在这些场景下，通过对用例进行分类，可以更好地组织和呈现测试报告，使其更易于理解和使用，同时也有助于提高测试效率和质量。

## 添加用例分类的方式

在 `Allure2` 报告中添加用例分类的方式可以通过 `@Epic`、`@Feature` 和 `@Story` 注解来实现。

- `@Epic` 注解用于表示一组相关的功能模块。一个 `Epic` 包含多个 Feature，多个 `Feature` 也可以属于同一个 `Epic`。

    >在测试类上使用@Epic注解来指定史诗（Epic）级别的分类。

- `@Feature` 注解用于表示 Epic 下的子模块或特性。一个 `Feature` 包含多个 `Story`，多个 `Story` 也可以属于同一个 `Feature`。

    >在测试方法上使用@Feature注解来指定功能（Feature）级别的分类。

- `@Story` 注解用于表示具体的需求或场景。一个 `Story` 通常是一个用例或一组相关的用例。

>在测试方法上使用`@Story`注解来指定故事（`Story`）级别的分类。<br>类别会展示在测试报告的 `Behaviors` 栏目下。

### 需求\系统：@Epic/@Epics

`@Epic` 注解的使用场景一般是在测试用例集合中，用来表示测试用例集的主题或目标。

>它通常被用来描述一个项目或产品的高级需求，比如一个大型的 `Web` 应用程序或一个框架的测试套件，因为这些项目或产品的测试用例可能需要在多个级别上进行组织和管理。

通过 `@Epic` 注解，测试人员可以更容易地识别测试用例集的主题或目标，更好地管理和维护测试用例。同时，它还可以提供更好的测试用例分析和报告功能，帮助测试人员更快地找到测试用例的问题和缺陷。


`@Epic`注解不只是在测试类上使用，还可以在`@Suite`套件上使用，可以为整个测试套件提供一个描述性的名称和概述。但是在报告里面无法正常展示，所以不做考虑。

#### 示例代码

```java
@Epic("需求1")
//@Epic("需求13")
@Epics({
    @Epic("需求2"),
    @Epic("需求3")
})
@DisplayName("步骤方法验证")
public class StepMethodTest {
    int result;

    @Test
    @DisplayName("加法步骤验证")
    void testSum() {
        //测试逻辑代码
    }

    @Test
    @DisplayName("一个测试方法中添加多个大步骤")
    void testMultipleSteps() {
        //测试逻辑代码
    }

    @Test
    @DisplayName("多个步骤验证")
    void testSum2() {
        //测试逻辑代码
    }
}
```

![](https://cdn.jsdelivr.net/gh/TesterDevSoul/pic/manual/20230315161817.png)

#### 注意

1. `@Epic` 可以添加多个，当只是添加该注解时，添加多个不报错。

2. `@Epics` 里面可以添加多个`@Epic`注解。

3. 当 `@Epic/@Epics` 同时并行存在时，只能各有一个。

4. 应该将`@Epic`注解放在测试类的上方，而不是测试方法上方。因为`@Epic`注解的作用是为整个测试类提供一个描述性的名称，以便在`Allure`报告中进行组织和过滤。

5. 在使用@Epic注解时，应该保证所有测试套件的@Epic注解都是唯一的，以避免在Allure报告中出现混淆和冲突的情况。

### 功能模块：@Feature/@Features

`@Feature`注解可以用于对测试用例进行更细粒度的分类和组织，通常用于表示被测系统的不同功能模块或特性。

>比如，在一个电商系统中，可以使用`@Epic`注解表示整个系统，在`@Epic`注解中再使用`@Feature`注解表示**商品模块**、**用户模块**、**订单模块**等不同的功能特性，这样可以更清晰地组织测试用例，方便进行管理和维护。

#### 示例代码

```java
@Epic("需求1")
//@Epic("需求13")
@Epics({
    @Epic("需求2"),
    @Epic("需求3")
})
@Feature("功能模块2")
@Features({
        @Feature("功能模块3"),
        @Feature("功能模块4")

})
@DisplayName("步骤方法验证")
public class StepMethodTest {
    int result;

    @Test
    @DisplayName("加法步骤验证")
    void testSum() {
        //测试逻辑代码
    }

    @Test
    @DisplayName("一个测试方法中添加多个大步骤")
    void testMultipleSteps() {
        //测试逻辑代码
    }

    @Test
    @DisplayName("多个步骤验证")
    void testSum2() {
        //测试逻辑代码
    }
}
```


![](https://cdn.jsdelivr.net/gh/TesterDevSoul/pic/manual/20230315164451.png)

#### 注意

1. `@Feature` 可以添加多个，当只是添加该注解时，添加多个不报错。

2. `@Features` 里面可以添加多个`@Feature`注解。

3. 当 `@Feature/@Features` 同时并行存在时，只能各有一个。

4. `@Feature` 注解应该用在测试类上，而不是测试方法上。

5. 应该为每个测试类添加一个 `@Feature` 注解，以便将测试方法分组为具有相同功能或特征的测试场景。

6. 在添加 `@Feature` 注解时，应该选择一个描述性的名称，以便在 `Allure` 报告中清晰地了解该测试类所代表的功能或特征。
   >例如，如果测试类包含所有登录和身份验证相关的测试方法，则可以为该测试类添加 @Feature("Login") 注解。

总之，`@Feature` 注解可以帮助将测试方法组织成更高层次的功能或特征，使得 Allure 报告更具可读性和可维护性。

### 用户故事：@Story/@Stories

`@Story` 注解用于定义**具体的需求**、**用户故事**或**场景**等。

通常，`@Story` 注解被用来描述一个需求或用户故事，以帮助测试人员和开发人员更好地理解测试的背景和目的。**`@Story` 注解应该在` @Feature` 注解之下使用**。

>举个例子，假设我们正在测试一个网站的登录功能。`@Feature` 注解可能会用于描述网站的用户验证功能，而 `@Story` 注解可能会用于描述某个具体的用户故事，如“**作为一个注册用户，我想要通过输入我的用户名和密码来登录，以便访问网站上的特定内容。**”

这有助于为测试人员和开发人员提供更好的上下文，从而更好地理解测试的目的。



#### 示例代码

```java
@Epic("需求1")
//@Epic("需求13")
@Epics({
    @Epic("需求2"),
    @Epic("需求3")
})
@DisplayName("步骤方法验证")
public class StepMethodTest {
    int result;

    @Story("子功能1")
    @Stories({
            @Story("子功能2"),
            @Story("子功能3")

    })
    @Test
    @DisplayName("加法步骤验证")
    void testSum() {
        //测试逻辑代码
    }

    @Story("子功能2")
    @Stories({
            @Story("子功能4"),
            @Story("子功能3")

    })
    @Test
    @DisplayName("一个测试方法中添加多个大步骤")
    void testMultipleSteps() {
        //测试逻辑代码
    }

    @Story("子功能7")
    @Stories({
            @Story("子功能3"),
            @Story("子功能5")
    })
    @Test
    @DisplayName("多个步骤验证")
    void testSum2() {
        //测试逻辑代码
    }
}
```

link()

#### 注意


1. `@Story` 注解应该只被用在测试用例方法上，而不是测试类或测试套件上。

2. `@Story` 注解中应该包含能够清晰地描述该测试用例涉及到的业务流程或功能模块的信息，以便在 `Allure` 报告中进行分类。

3. `@Story` 注解中不应该包含测试用例的具体实现细节，因为这些信息应该在测试方法的代码中进行注释或者使用 `Allure` 中的 `@Step` 注解进行记录。

4. @`Story` 注解的值应该是一个**字符串类型**，可以包**含空格和特殊字符**，但应该尽量简洁明了，避免使用过长或者复杂的描述。

5. `@Story` 注解应该结合其他注解一起使用，例如 `@Epic` 和 `@Feature` 注解，以便在 `Allure` 报告中能够更好地进行分类和展示。


## 用例分类之间关系

在 Allure 报告中，@Epic、@Feature、@Story 注解之间是一种层次关系，可以用一个案例来描述这种关系：

- Epic: 创建一个购物平台

  - Feature: 用户登录

    - Story: 用户名密码正确，可以登录

    - Story: 用户名错误，提示用户名不存在

    - Story: 密码错误，提示密码错误

  - Feature: 商品展示

    - Story: 商品列表展示

    - Story: 商品详情展示

在这个案例中，@Epic 表示一个史诗级别的需求或目标，这里是创建一个购物平台。@Feature 表示一个大的功能模块，这里有两个功能模块，即用户登录和商品展示。@Story 表示一个具体的场景或测试用例，这里每个功能模块都有若干个测试用例或场景，如用户登录有三个场景。

因此，可以理解为一个 @Epic 中包含多个 @Feature，每个 @Feature 中包含多个 @Story。这种关系可以帮助我们更好地组织测试用例，同时也有助于 Allure 报告的分类和过滤。





