## Allure2 报告中添加附件-视频


### 应用场景

1. 自动化测试用例需要测试移动端或web端的视频功能时，可以通过Allure添加视频作为测试用例的一部分，方便查看视频是否正常播放。

2. 在测试过程中，可以通过Allure添加测试中出现的异常、错误、截图等多种信息，以及关键的视频记录，方便快速定位问题，提高定位问题的效率。

3. 当需要记录用户界面操作时，可以录制屏幕操作为MP4文件，将其添加到Allure报告中，以便其他人更好地理解测试过程。

4. 在测试中，某些场景下需要对用户操作进行录制，这时可以使用Allure将MP4文件添加到测试报告中，更好地展示测试用例执行的过程。

总之，Allure添加MP4文件的应用场景非常广泛，可以帮助开发人员更好地理解测试用例执行的过程，提高测试用例的可视化程度，更好地推动整个测试流程的优化。


## 添加视频的方式

1. 在测试方法中添加`@Attachment`注解。


2. 使用`Allure.addAttachment()`方法。

### 注解方式添加

#### 语法结构

```java
@Attachment(value = "视频名", type = "video/mp4", fileExtension = "后缀")
```

```java
    @Test
    @DisplayName("Mp4")
    public void exampleTest() throws IOException {
        byte[] contents = Files.newInputStream(Paths.get("allure.mp4"))
                .readAllBytes();
        attachMp4File(contents,"Vedio添加");
    }
    @Attachment(value = "{attachmentName}", type = "video/mp4")
    private byte[] attachMp4File(byte[] contents, String attachmentName) {
        return contents;

    }
```


#### 

```java
    @Test
    public void testWithVideoAttachment() throws IOException {
        // 添加图片附件
        Allure.addAttachment("Mp4", "video/mp4",
                Files.newInputStream(Paths.get("allure.mp4")),
                ".mp4");

    }
```
![](https://cdn.jsdelivr.net/gh/TesterDevSoul/pic/manual/20230317190610.png)


