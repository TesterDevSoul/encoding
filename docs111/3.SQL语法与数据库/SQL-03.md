---
theme: "league"
transition: "fade"
title: "霍格沃兹测试开发"
use: hogwarts
---

# MySQL

霍格沃兹测试开发学社

ceshiren.com


---


## 目录


- 多表查询
- 内连接查询
- 外连接查询



---


## DQL操作多表
- 多表查询: 查询多张表,获取到需要的数据。




---



### 数据准备 
- 数据库创建
- 创建表
- 插入数据


---



### 数据库创建 
创建db3_2 数据库，编码格式为utf8。




---



### 创建表

```sql
-- 分类表 (一方 主表) 
CREATE TABLE category (
  cid VARCHAR(32) PRIMARY KEY ,
  cname VARCHAR(50)
);

-- 商品表 (多方 从表) 
CREATE TABLE products(
    pid VARCHAR(32) PRIMARY KEY ,
    pname VARCHAR(50),
    price INT,
    flag VARCHAR(2), -- 是否上架标记为:1表示上架、0表示下架 
    category_id VARCHAR(32),
    -- 添加外键约束
   FOREIGN KEY (category_id) REFERENCES category (cid)
);
```




---


### 插入数据

分类表数据：
  - c001,家电。
  - c002,鞋服。
  - c003,化妆品。
  - c004,汽车。


---


### 插入数据

商品表数据：
  - p001,小米电视机,5000,1,c001。
  - p002,格力空调,3000,1,c001。
  - p003,美的冰箱,4500,1,c001。
  - p004,篮球鞋,800,1,c002。
  - p005,运动裤,200,1,c002。
  - p006,T恤,300,1,c002。
  - p007,冲锋衣,2000,1,c002。
  - p008,神仙水,800,1,c003。




---


## 多表查询的分类 


- 内连接查询
- 外连接查询


---

 
### 内连接查询
- 隐式内连接
- 显式内连接



---




### 隐式内连接

- 语法：
- 需求：
  - 有两张表：students和scores。
  - 其中students表包含学生姓名name和学生年龄age两个列。
  - scores表包含学生姓名name和学生成绩score两个列。
  - SQL查询语句查询每个学生的姓名、年龄和成绩。


```sql
SELECT 字段名 FROM 左表, 右表 WHERE 连接条件;
```



---



### 需求
1. 查询所有商品信息和对应的分类信息。
2. 查询商品表的 商品名称 和 价格,以及商品的分类信息。
3. 查询格力空调是属于哪一分类下的商品



---




### 显式内连接
- 使用JOIN关键字和ON子句来连接两个表。
- 语法格式：
- 需求：
  - 有两张表：students和scores。
  - students表包含学生姓名name和学生年龄age两个列。
  - scores表包含学生姓名name和学生成绩score两个列。
  - 使用SQL查询语句查询每个学生的姓名、年龄和成绩。

```sql
SELECT 字段名 
FROM 左表 
[INNER] JOIN 右表 ON 条件 

-- inner 可以省略
```






---



### 需求

1. 查询所有商品信息和对应的分类信息。
2. 查询鞋服分类下,价格大于500的商品名称和价格。




---


### 外连接查询 

- 左外连接
- 右外连接


---


### 左外连接

- **左外连接的特点**：
  - 以左表为基准, 匹配右边表中的数据。
  - 如果匹配的上,就展示匹配到的数据。
  - 如果匹配不到, 左表中的数据正常展示, 右边的展示为null。
- 语法格式：



```sql
SELECT 列名1，列名2，...
FROM 左表名
LEFT JOIN 右表名
ON 连接条件;
```



---



### 需求

- 有两张表：
  - 一张是学生信息表students，包含学生ID和姓名两个字段。

  - 一张是学生成绩表scores，包含学生ID和成绩两个字段。
  
  - 查询出每个学生的姓名和成绩，如果某个学生没有对应的成绩，则成绩列显示为NULL。




---



### JOIN操作

- LEFT JOIN返回左侧表中所有的记录，无论是否有对应的右侧表中的记录。

- RIGHT JOIN返回右侧表中的所有记录，无论是否有对应的左侧表中的记录。

- FULL OUTER JOIN返回左右两个表中的所有记录。


---


### 需求

- 左外连接, 查询每个分类下的商品个数
  - 1.连接条件: 主表.主键 = 从表.外键 
  - 2.查询条件: 每个分类 需要分组 
  - 3.要查询的字段: 分类名称, 分类下商品个数



---



### 右外连接
- **右外连接的特点**：
  - 以右表为基准，匹配左边表中的数据。
  - 如果能匹配到，展示匹配到的数据。
  - 如果匹配不到，右表中的数据正常展示, 左边展示为null。

- 语法：


```sql
SELECT 列名1，列名2，...
FROM 左表名
RIGHT JOIN 右表名
ON 连接条件;

```



---

### 需求

- 有两张表：学生表和成绩表。

- 学生表中有学生的姓名、年龄等信息。

- 成绩表中有学生的姓名和各科成绩信息。

- 使用右外连接查询每个学生的姓名、年龄和成绩，

  - 如果某个学生在学生表中没有对应的记录，则学生信息显示为NULL。